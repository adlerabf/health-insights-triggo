version: 2

models:
  - name: dim_date
    description: "Date dimension with daily granularity for time-based analysis."
    columns:
      - name: date_id
        description: "Surrogate key representing a unique date."
        tests:
          - unique
          - not_null
      - name: full_date
        description: "The full date."
        tests:
          - not_null
      - name: year
        description: "Year of the date."
      - name: month
        description: "Month of the date."
      - name: day
        description: "Day of the month."
      - name: day_of_week
        description: "Number representing the day of the week."
      - name: quarter
        description: "Quarter of the year."
      - name: quarter_name
        description: "Name of the quarter."
      - name: month_name
        description: "Name of the month."
      - name: day_name
        description: "Name of the day of the week."
      - name: day_of_year
        description: "Day of the year."
      - name: week_of_year
        description: "Week of the year."
      - name: is_month_start
        description: "Indicates if the date is the start of a month."
      - name: is_month_end
        description: "Indicates if the date is the end of a month."

  - name: dim_demographics
    description: "Dimension that categorizes patients by age and sex."
    columns:
      - name: demographic_key
        description: "Surrogate key for the demographic record."
        tests:
          - unique
          - not_null

      - name: patient_id
        description: "Unique identifier of the patient."
        tests:
          - not_null

      - name: patient_age
        description: "Patient's age."
        tests:
          - not_null

      - name: patient_gender
        description: "Patient's gender."
        tests:
          - not_null
          
      - name: age_group
        description: "Age group categorized as Child, Teenager, Adult, Elderly."

  - name: dim_disease
    description: "Disease dimension based on ICD codes and descriptions."
    columns:
      - name: disease_key
        description: "Surrogate key for the disease."
        tests:
          - unique
          - not_null
      - name: icd_code
        description: "Disease code following the ICD standard."
        tests:
          - not_null
      - name: icd_description
        description: "Textual description of the disease."
        tests:
          - not_null

  - name: dim_location
    description: "Location dimension containing cities, states, and regions."
    columns:
      - name: location_key
        description: "Surrogate key for the city/location."
        tests:
          - unique
          - not_null
      - name: city_code
        description: "Original city code from IBGE."
        tests:
          - not_null
      - name: city_name
        description: "Name of the city."
        tests:
          - not_null
      - name: state_code
        description: "State abbreviation."
        tests:
          - not_null
      - name: region_name
        description: "Name of the region."

  - name: dim_procedure
    description: "Dimension with medical procedure codes and names."
    columns:
      - name: procedure_key
        description: "Surrogate key for the procedure."
        tests:
          - unique
          - not_null
      - name: procedure_code
        description: "Original procedure code."
        tests:
          - not_null
      - name: procedure_name
        description: "Name of the procedure."
        tests:
          - not_null
